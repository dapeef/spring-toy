(()=>{"use strict";var t;!function(t){t[t.Triangle=0]="Triangle",t[t.Parallelogram=1]="Parallelogram",t[t.Square=2]="Square",t[t.CenteredSquare=3]="CenteredSquare"}(t||(t={}));var i,s=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y},t.prototype.multiplyBy=function(t){this.x*=t,this.y*=t},t.prototype.normalize=function(){this.multiplyBy(1/this.length())},t.prototype.plus=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.minus=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.times=function(i){return new t(this.x*i,this.y*i)},t.prototype.length=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.normalized=function(){return 0===this.length()?this:this.times(1/this.length())},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.clamp=function(t){this.length()>t&&(this.normalize(),this.multiplyBy(t))},t.prototype.copy=function(){return new t(this.x,this.y)},t}(),e=(i=function(t,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},i(t,s)},function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function e(){this.constructor=t}i(t,s),t.prototype=null===s?Object.create(s):(e.prototype=s.prototype,new e)}),n=function(){function t(t,i,e,n,o,h){void 0===t&&(t=new s(25,25)),void 0===i&&(i=1),void 0===e&&(e=1e-7),void 0===n&&(n=1),void 0===o&&(o=new s(50,50)),void 0===h&&(h=5e-4),this._position=t,this.mass=i,this.stiffness=e,this.damping=n,this._size=o,this.dragCoefficient=h,this.isBeingDragged=!1,this.relativeMousePosition=new s,this.springs=[],this.entitySprings=[],this._velocity=new s}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"velocity",{get:function(){return this._velocity},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._position.x-this._size.x/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._position.x+this._size.x/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._position.y-this._size.y/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this._position.y+this._size.y/2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minSize",{get:function(){return Math.min(this._size.x,this._size.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{get:function(){return Math.max(this._size.x,this._size.y)},enumerable:!1,configurable:!0}),t.prototype.addSpring=function(t){this.springs.push(t)},t.prototype.addEntitySpring=function(t){this.entitySprings.push(t)},t.prototype.update=function(i,e,n,o,r,a,p){var d=this;if(this.isBeingDragged){var u=this._position.copy();this._position=n.minus(this.relativeMousePosition),this._velocity=this._position.minus(u).times(1/e)}else{var c=new s;c.add(new s(0,this.mass*r)),this.springs.forEach((function(t){c.add(t.getForce(d))}));var y=[];this.left<=0&&y.push(new h(this,new t(new s(-this._size.x/2,this._position.y)),this._size.x)),this.right>=i.width&&y.push(new h(this,new t(new s(i.width+this._size.x/2,this._position.y)),this._size.x)),this.top<=0&&y.push(new h(this,new t(new s(this._position.x,-this._size.y/2)),this._size.y)),this.bottom>=i.height&&y.push(new h(this,new t(new s(this._position.x,i.height+this._size.y/2)),this._size.y)),y.forEach((function(t){c.add(t.getForce(d))})),this.entitySprings.forEach((function(t){c.add(t.getForce(d))})),c.add(this._velocity.normalized().times(-this.dragCoefficient*Math.pow(this._velocity.length(),2)));var l=c.times(1/this.mass);this._velocity.add(l.times(e)),this._velocity.clamp(p),this._position.add(this._velocity.times(e)),this.right<=0&&(this._velocity.x=0,this._position.x=-this.size.x/2+1),this.left>=i.width&&(this._velocity.x=0,this._position.x=i.width+this.size.x/2-1),this.bottom<=0&&(this._velocity.y=0,this._position.y=-this.size.y/2+1),this.top>=i.height&&(this._velocity.y=0,this._position.y=i.height+this.size.y/2-1)}},t.prototype.draw=function(t){t.strokeStyle="black",t.beginPath(),t.ellipse(this._position.x,this._position.y,this._size.x/2,this._size.y/2,0,0,2*Math.PI),t.fill()},t}(),o=function(){function t(t,i,e,n,o){void 0===e&&(e=200),void 0===n&&(n=1e-4),void 0===o&&(o=.001),this.mass1=t,this.mass2=i,this.naturalLength=e,this.stiffness=n,this.damping=o,this.length=0,this.relativePos=new s,this.elasticForce=new s,this.dampingForce=new s,this.force=new s,this.defaultWidth=10,this.update()}return t.prototype.getForce=function(t){return t===this.mass2?this.force:this.force.times(-1)},t.prototype.update=function(){this.relativePos=this.mass1.position.minus(this.mass2.position),this.length=this.relativePos.length();var t=this.relativePos.normalized();this.elasticForce=t.times((this.length-this.naturalLength)*this.stiffness);var i=this.mass1.velocity.minus(this.mass2.velocity).dot(t);this.dampingForce=t.times(i*this.damping),this.force=this.elasticForce.plus(this.dampingForce)},t.prototype.draw=function(t){t.beginPath(),t.moveTo(this.mass1.position.x,this.mass1.position.y),t.lineTo(this.mass2.position.x,this.mass2.position.y),t.lineWidth=Math.min(this.defaultWidth*this.naturalLength/this.length,this.mass1.minSize,this.mass2.minSize),t.strokeStyle="gray",t.stroke()},t}(),h=function(t){function i(i,s,e,n,o){void 0===n&&(n=1e-5),void 0===o&&(o=.01);var h=t.call(this,s,i,e,n,o)||this;return h.mass1=i,h.mass2=s,h.naturalLength=e,h.stiffness=n,h.damping=o,h.hertzExponent=2,h.penaltyExponent=.5,h.update(),h}return e(i,t),i.prototype.update=function(){this.relativePos=this.mass1.position.minus(this.mass2.position),this.length=this.relativePos.length();var t=this.relativePos.normalized();if(this.length<this.naturalLength){var i=Math.pow(this.naturalLength-this.length,this.hertzExponent)*this.stiffness,e=1+1/Math.pow(this.length,this.penaltyExponent);this.elasticForce=t.times(i*e).times(-1);var n=this.mass1.velocity.minus(this.mass2.velocity).dot(t);this.dampingForce=t.times(n*this.damping),this.force=this.elasticForce.plus(this.dampingForce)}else this.force=new s},i}(o),r=function(){function i(t){this.canvas=t,this.mousePosition=new s,this.maxDeltaTime=50,this.gravity=5e-4,this.maxForce=.1,this.maxSpeed=1e4,this.ctx=t.getContext("2d"),this.lastTime=0,this.deltaTime=0,this.masses=[],this.springs=[],this.entitySprings=[]}return i.prototype.addMass=function(t){var i=this;this.masses.forEach((function(s){var e=new h(s,t,s.maxSize/2+t.maxSize/2);i.entitySprings.push(e),s.addEntitySpring(e),t.addEntitySpring(e)})),this.masses.push(t)},i.prototype.addSpring=function(t){this.springs.push(t),t.mass1.addSpring(t),t.mass2.addSpring(t)},i.prototype.mouseDown=function(t){var i=this;this.mousePosition.x=t.x,this.mousePosition.y=t.y,this.masses.forEach((function(s){s.position.x-s.size.x<=t.x&&s.position.x+s.size.x>=t.x&&s.position.y-s.size.y<=t.y&&s.position.y+s.size.y>=t.y&&(s.isBeingDragged=!0,s.relativeMousePosition=i.mousePosition.minus(s.position))}))},i.prototype.mouseMove=function(t){this.mousePosition.x=t.x,this.mousePosition.y=t.y},i.prototype.mouseUp=function(t){this.masses.forEach((function(t){return t.isBeingDragged=!1}))},i.prototype.createDemo=function(i){if(i===t.Triangle){var e=new n(new s(15,30)),h=new n(new s(30,300)),r=new n(new s(300,30));this.addMass(e),this.addMass(h),this.addMass(r);var a=new o(e,h),p=new o(h,r),d=new o(e,r);this.addSpring(a),this.addSpring(p),this.addSpring(d)}if(i===t.Parallelogram){e=new n(new s(30,30)),h=new n(new s(30,300)),r=new n(new s(300,30));var u=new n(new s(300,300));this.addMass(e),this.addMass(h),this.addMass(r),this.addMass(u),a=new o(e,h),p=new o(h,r),d=new o(e,r);var c=new o(r,u),y=new o(h,u);this.addSpring(a),this.addSpring(p),this.addSpring(d),this.addSpring(c),this.addSpring(y)}if(i===t.Square){e=new n(new s(30,30)),h=new n(new s(30,300)),r=new n(new s(300,30)),u=new n(new s(300,300)),this.addMass(e),this.addMass(h),this.addMass(r),this.addMass(u),a=new o(e,h),p=new o(e,u,200*Math.sqrt(2)),d=new o(h,u),c=new o(r,u),y=new o(e,r);var l=new o(h,r,200*Math.sqrt(2));this.addSpring(a),this.addSpring(p),this.addSpring(d),this.addSpring(c),this.addSpring(y),this.addSpring(l)}if(i===t.CenteredSquare){e=new n(new s(30,30)),h=new n(new s(30,300)),r=new n(new s(300,30)),u=new n(new s(300,300));var m=new n(new s(150,150));this.addMass(e),this.addMass(h),this.addMass(r),this.addMass(u),this.addMass(m),a=new o(e,h),p=new o(e,r),d=new o(h,u),c=new o(r,u),y=new o(e,m,100*Math.sqrt(2)),l=new o(h,m,100*Math.sqrt(2));var f=new o(r,m,100*Math.sqrt(2)),g=new o(u,m,100*Math.sqrt(2));this.addSpring(a),this.addSpring(p),this.addSpring(d),this.addSpring(c),this.addSpring(y),this.addSpring(l),this.addSpring(f),this.addSpring(g)}},i.prototype.start=function(){requestAnimationFrame(this.mainLoop.bind(this))},i.prototype.mainLoop=function(t){this.deltaTime=Math.min(t-this.lastTime,this.maxDeltaTime),this.lastTime=t,this.update(this.deltaTime),this.draw(),requestAnimationFrame(this.mainLoop.bind(this))},i.prototype.update=function(t){var i=this;this.masses.forEach((function(s){return s.update(i.canvas,t,i.mousePosition,i.masses,i.gravity,i.maxForce,i.maxSpeed)})),this.springs.forEach((function(t){return t.update()})),this.entitySprings.forEach((function(t){return t.update()}))},i.prototype.draw=function(){var t=this;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.springs.forEach((function(i){return i.draw(t.ctx)})),this.masses.forEach((function(i){return i.draw(t.ctx)}))},i}(),a=document.getElementById("canvas");function p(){a.width=window.innerWidth,a.height=window.innerHeight}window.addEventListener("resize",p),p();var d=new r(a);a.onmousedown=d.mouseDown.bind(d),a.onmousemove=d.mouseMove.bind(d),a.onmouseup=d.mouseUp.bind(d);var u=Math.floor(Math.random()*Object.keys(t).length/2);d.createDemo(u),d.start()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQUNaLEdBQVcsT0FBQUEsRUFBT0csUUFBUCxJQUNqQ25DLEtBQUsyQixjQUFjaUIsU0FBUSxTQUFDWixHQUFXLE9BQUFBLEVBQU9HLFFBQVAsR0FDM0MsRUFDUSxZQUFBc0IsS0FBUixzQkFFSXpELEtBQUswRCxJQUFJOEQsVUFBVSxFQUFHLEVBQUd4SCxLQUFLb0MsT0FBT2UsTUFBT25ELEtBQUtvQyxPQUFPa0IsUUFFeER0RCxLQUFLMEIsUUFBUWtCLFNBQVEsU0FBQzZFLEdBQVcsT0FBQUEsRUFBT2hFLEtBQUssRUFBS0MsSUFBakIsSUFDakMxRCxLQUFLdUMsT0FBT0ssU0FBUSxTQUFDekIsR0FBUyxPQUFBQSxFQUFLc0MsS0FBSyxFQUFLQyxJQUFmLEdBQ2xDLEVBQ0osRUE1TEEsR0NBTXRCLEVBQVNzRixTQUFTQyxlQUFlLFVBRXZDLFNBQVNDLElBQ0x4RixFQUFPZSxNQUFTMEUsT0FBT0MsV0FDdkIxRixFQUFPa0IsT0FBU3VFLE9BQU9FLFdBQzNCLENBRUFGLE9BQU9HLGlCQUFpQixTQUFVSixHQUNsQ0EsSUFHQSxJQUFNSyxFQUFPLElBQUlDLEVBQUs5RixHQUV0QkEsRUFBTytGLFlBQWNGLEVBQUtuQyxVQUFVd0IsS0FBS1csR0FDekM3RixFQUFPZ0csWUFBY0gsRUFBS2pDLFVBQVVzQixLQUFLVyxHQUN6QzdGLEVBQU9pRyxVQUFZSixFQUFLaEMsUUFBUXFCLEtBQUtXLEdBRXJDLElBQU1LLEVBQVc1SCxLQUFLNkgsTUFBTTdILEtBQUs4SCxTQUFXQyxPQUFPQyxLQUFLL0ksR0FBVVUsT0FBUyxHQUMzRTRILEVBQUsvQixXQUFXb0MsR0FFaEJMLEVBQUtkLE8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcHJpbmctdG95Ly4vc3JjL3V0aWxpdGllcy50cyIsIndlYnBhY2s6Ly9zcHJpbmctdG95Ly4vc3JjL2VudGl0aWVzLnRzIiwid2VicGFjazovL3NwcmluZy10b3kvLi9zcmMvZ2FtZS50cyIsIndlYnBhY2s6Ly9zcHJpbmctdG95Ly4vc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gRGVtb1R5cGUge1xyXG4gICAgVHJpYW5nbGUsXHJcbiAgICBQYXJhbGxlbG9ncmFtLFxyXG4gICAgU3F1YXJlLFxyXG4gICAgQ2VudGVyZWRTcXVhcmVcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBWZWN0b3IyIHtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB4Om51bWJlciA9IDAsIHB1YmxpYyB5Om51bWJlciA9IDApIHt9O1xyXG5cclxuICAgIHB1YmxpYyBhZGQodmVjdG9yOlZlY3RvcjIpOnZvaWQge1xyXG4gICAgICAgIC8vIEFkZCBhbm90aGVyIFZlY3RvcjIgdG8gdGhpcyBWZWN0b3IyXHJcbiAgICAgICAgdGhpcy54ICs9IHZlY3Rvci54O1xyXG4gICAgICAgIHRoaXMueSArPSB2ZWN0b3IueTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIHN1YnRyYWN0KHZlY3RvcjpWZWN0b3IyKTp2b2lkIHtcclxuICAgICAgICAvLyBTdWJ0cmFjdCBhbm90aGVyIFZlY3RvcjIgZnJvbSB0aGlzIFZlY3RvcjJcclxuICAgICAgICB0aGlzLnggLT0gdmVjdG9yLng7XHJcbiAgICAgICAgdGhpcy55IC09IHZlY3Rvci55O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtdWx0aXBseUJ5KHNjYWxhcjpudW1iZXIpOnZvaWQge1xyXG4gICAgICAgIC8vIFN1bSB0aGlzIFZlY3RvcjIgd2l0aCB0aGUgbmVnYXRpdmUgb2YgYW5vdGhlciBhbmQgcmV0dXJuIGEgbmV3IFZlY3RvcjIgb2YgdGhlIHJlc3VsdFxyXG4gICAgICAgIHRoaXMueCAqPSBzY2FsYXJcclxuICAgICAgICB0aGlzLnkgKj0gc2NhbGFyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBub3JtYWxpemUoKTp2b2lkIHtcclxuICAgICAgICB0aGlzLm11bHRpcGx5QnkoMS90aGlzLmxlbmd0aCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGx1cyh2ZWN0b3I6VmVjdG9yMik6VmVjdG9yMiB7XHJcbiAgICAgICAgLy8gU3VtIHRoaXMgVmVjdG9yMiB3aXRoIGFub3RoZXIgYW5kIHJldHVybiBhIG5ldyBWZWN0b3IyIG9mIHRoZSByZXN1bHRcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIG1pbnVzKHZlY3RvcjpWZWN0b3IyKTpWZWN0b3IyIHtcclxuICAgICAgICAvLyBTdW0gdGhpcyBWZWN0b3IyIHdpdGggdGhlIG5lZ2F0aXZlIG9mIGFub3RoZXIgYW5kIHJldHVybiBhIG5ldyBWZWN0b3IyIG9mIHRoZSByZXN1bHRcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy54IC0gdmVjdG9yLngsIHRoaXMueSAtIHZlY3Rvci55KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdGltZXMoc2NhbGFyOm51bWJlcik6VmVjdG9yMiB7XHJcbiAgICAgICAgLy8gU3VtIHRoaXMgVmVjdG9yMiB3aXRoIHRoZSBuZWdhdGl2ZSBvZiBhbm90aGVyIGFuZCByZXR1cm4gYSBuZXcgVmVjdG9yMiBvZiB0aGUgcmVzdWx0XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMueCAqIHNjYWxhciwgdGhpcy55ICogc2NhbGFyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbGVuZ3RoKCk6bnVtYmVyIHtcclxuICAgICAgICAvLyBHZXQgbGVuZ3RoIG9mIHRoZSB2ZWN0b3JcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHRoaXMueCwgMikgKyBNYXRoLnBvdyh0aGlzLnksIDIpKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBub3JtYWxpemVkKCk6VmVjdG9yMiB7XHJcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoKCkgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aW1lcygxL3RoaXMubGVuZ3RoKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZG90KHZlY3RvcjpWZWN0b3IyKTpudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGFtcChtYWduaXR1ZGU6bnVtYmVyKTp2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5sZW5ndGgoKSA+IG1hZ25pdHVkZSkge1xyXG4gICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZSgpXHJcbiAgICAgICAgICAgIHRoaXMubXVsdGlwbHlCeShtYWduaXR1ZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29weSgpOlZlY3RvcjIge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3V0aWxpdGllc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1hc3Mge1xyXG4gICAgcHJpdmF0ZSBzcHJpbmdzOlNwcmluZ1tdO1xyXG4gICAgcHJpdmF0ZSBlbnRpdHlTcHJpbmdzOlNwcmluZ1tdO1xyXG4gICAgcHJpdmF0ZSBfdmVsb2NpdHk6VmVjdG9yMjtcclxuICAgIHB1YmxpYyBpc0JlaW5nRHJhZ2dlZDpib29sZWFuID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgcmVsYXRpdmVNb3VzZVBvc2l0aW9uOlZlY3RvcjIgPSBuZXcgVmVjdG9yMigpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX3Bvc2l0aW9uOlZlY3RvcjIgPSBuZXcgVmVjdG9yMigyNSwgMjUpLCBwcml2YXRlIG1hc3M6bnVtYmVyID0gMSwgcHJpdmF0ZSBzdGlmZm5lc3M6bnVtYmVyID0gMWUtNywgcHJpdmF0ZSBkYW1waW5nOm51bWJlciA9IDFlMCwgcHJpdmF0ZSBfc2l6ZTpWZWN0b3IyID0gbmV3IFZlY3RvcjIoNTAsIDUwKSwgcHJpdmF0ZSBkcmFnQ29lZmZpY2llbnQ6bnVtYmVyID0gNWUtNCkge1xyXG4gICAgICAgIHRoaXMuc3ByaW5ncyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZW50aXR5U3ByaW5ncyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX3ZlbG9jaXR5ID0gbmV3IFZlY3RvcjIoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGdldCBwb3NpdGlvbigpIDogVmVjdG9yMiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCB2ZWxvY2l0eSgpIDogVmVjdG9yMiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZlbG9jaXR5O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBzaXplKCkgOiBWZWN0b3IyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2l6ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGdldCBsZWZ0KCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbi54IC0gdGhpcy5fc2l6ZS54LzI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IHJpZ2h0KCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbi54ICsgdGhpcy5fc2l6ZS54LzI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IHRvcCgpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb24ueSAtIHRoaXMuX3NpemUueS8yO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBib3R0b20oKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uLnkgKyB0aGlzLl9zaXplLnkvMjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IG1pblNpemUoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMuX3NpemUueCwgdGhpcy5fc2l6ZS55KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgbWF4U2l6ZSgpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgodGhpcy5fc2l6ZS54LCB0aGlzLl9zaXplLnkpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgYWRkU3ByaW5nKHNwcmluZzpTcHJpbmcpOnZvaWQge1xyXG4gICAgICAgIHRoaXMuc3ByaW5ncy5wdXNoKHNwcmluZyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkRW50aXR5U3ByaW5nKHNwcmluZzpTcHJpbmcpOnZvaWQge1xyXG4gICAgICAgIHRoaXMuZW50aXR5U3ByaW5ncy5wdXNoKHNwcmluZyk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGNhbnZhczpIVE1MQ2FudmFzRWxlbWVudCwgZGVsdGFUaW1lOm51bWJlciwgbW91c2VQb3NpdGlvbjpWZWN0b3IyLCBtYXNzZXM6TWFzc1tdLCBncmF2aXR5Om51bWJlciwgbWF4Rm9yY2U6bnVtYmVyLCBtYXhTcGVlZDpudW1iZXIpOnZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQmVpbmdEcmFnZ2VkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZFBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb24uY29weSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IG1vdXNlUG9zaXRpb24ubWludXModGhpcy5yZWxhdGl2ZU1vdXNlUG9zaXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLl92ZWxvY2l0eSA9IHRoaXMuX3Bvc2l0aW9uLm1pbnVzKG9sZFBvc2l0aW9uKS50aW1lcygxL2RlbHRhVGltZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGZvcmNlID0gbmV3IFZlY3RvcjIoKTtcclxuICAgICAgICAgICAgLy8gR3Jhdml0eVxyXG4gICAgICAgICAgICBmb3JjZS5hZGQobmV3IFZlY3RvcjIoMCwgdGhpcy5tYXNzICogZ3Jhdml0eSkpO1xyXG5cclxuICAgICAgICAgICAgLy8gU3ByaW5nc1xyXG4gICAgICAgICAgICB0aGlzLnNwcmluZ3MuZm9yRWFjaChzcHJpbmcgPT4ge2ZvcmNlLmFkZChzcHJpbmcuZ2V0Rm9yY2UodGhpcykpfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBCb3VuY2Ugb2ZmIHdhbGxzXHJcbiAgICAgICAgICAgIGxldCB3YWxsU3ByaW5nczpDb250YWN0U3ByaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGVmdCA8PSAwKSAgICAgICAgICAgICAgICAge3dhbGxTcHJpbmdzLnB1c2gobmV3IENvbnRhY3RTcHJpbmcodGhpcywgbmV3IE1hc3MobmV3IFZlY3RvcjIoLXRoaXMuX3NpemUueC8yICAgICAgICAgICAgICAgICwgdGhpcy5fcG9zaXRpb24ueSkpLCB0aGlzLl9zaXplLngpKX0gLy8gTGVmdFxyXG4gICAgICAgICAgICBpZiAodGhpcy5yaWdodCA+PSBjYW52YXMud2lkdGgpICAgICB7d2FsbFNwcmluZ3MucHVzaChuZXcgQ29udGFjdFNwcmluZyh0aGlzLCBuZXcgTWFzcyhuZXcgVmVjdG9yMihjYW52YXMud2lkdGgrdGhpcy5fc2l6ZS54LzIgICAgLCB0aGlzLl9wb3NpdGlvbi55KSksIHRoaXMuX3NpemUueCkpfSAvLyBSaWdodFxyXG4gICAgICAgICAgICBpZiAodGhpcy50b3AgPD0gMCkgICAgICAgICAgICAgICAgICB7d2FsbFNwcmluZ3MucHVzaChuZXcgQ29udGFjdFNwcmluZyh0aGlzLCBuZXcgTWFzcyhuZXcgVmVjdG9yMih0aGlzLl9wb3NpdGlvbi54LCAtdGhpcy5fc2l6ZS55LzIgICAgICAgICAgICAgICAgKSksIHRoaXMuX3NpemUueSkpfSAvLyBUb3BcclxuICAgICAgICAgICAgaWYgKHRoaXMuYm90dG9tID49IGNhbnZhcy5oZWlnaHQpICAge3dhbGxTcHJpbmdzLnB1c2gobmV3IENvbnRhY3RTcHJpbmcodGhpcywgbmV3IE1hc3MobmV3IFZlY3RvcjIodGhpcy5fcG9zaXRpb24ueCwgY2FudmFzLmhlaWdodCt0aGlzLl9zaXplLnkvMiAgICkpLCB0aGlzLl9zaXplLnkpKX0gLy8gQm90dG9tXHJcbiAgICAgICAgICAgIHdhbGxTcHJpbmdzLmZvckVhY2goc3ByaW5nID0+IHtmb3JjZS5hZGQoc3ByaW5nLmdldEZvcmNlKHRoaXMpKX0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQm91bmNlIG9mZiBvdGhlciBlbnRpdGllc1xyXG4gICAgICAgICAgICB0aGlzLmVudGl0eVNwcmluZ3MuZm9yRWFjaChzcHJpbmcgPT4ge2ZvcmNlLmFkZChzcHJpbmcuZ2V0Rm9yY2UodGhpcykpfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBaXIgcmVzaXN0YW5jZVxyXG4gICAgICAgICAgICBmb3JjZS5hZGQodGhpcy5fdmVsb2NpdHkubm9ybWFsaXplZCgpLnRpbWVzKC10aGlzLmRyYWdDb2VmZmljaWVudCAqIE1hdGgucG93KHRoaXMuX3ZlbG9jaXR5Lmxlbmd0aCgpLCAyKSkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ29tcHV0ZSBkaWZmZXJlbnRpYWwgZXF1YXRpb25zXHJcbiAgICAgICAgICAgIGxldCBhY2NlbGVyYXRpb246VmVjdG9yMiA9IGZvcmNlLnRpbWVzKDEvdGhpcy5tYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fdmVsb2NpdHkuYWRkKGFjY2VsZXJhdGlvbi50aW1lcyhkZWx0YVRpbWUpKTtcclxuICAgICAgICAgICAgdGhpcy5fdmVsb2NpdHkuY2xhbXAobWF4U3BlZWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9wb3NpdGlvbi5hZGQodGhpcy5fdmVsb2NpdHkudGltZXMoZGVsdGFUaW1lKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBQdXQgaGFyZCBsaW1pdCBvbiB3YWxsc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yaWdodCA8PSAwKSAgICAgICAgICAgIHt0aGlzLl92ZWxvY2l0eS54ID0gMDsgdGhpcy5fcG9zaXRpb24ueCA9IC10aGlzLnNpemUueC8yICsgMX0gLy8gTGVmdFxyXG4gICAgICAgICAgICBpZiAodGhpcy5sZWZ0ID49IGNhbnZhcy53aWR0aCkgIHt0aGlzLl92ZWxvY2l0eS54ID0gMDsgdGhpcy5fcG9zaXRpb24ueCA9IGNhbnZhcy53aWR0aCArIHRoaXMuc2l6ZS54LzIgLSAxfSAvLyBSaWdodFxyXG4gICAgICAgICAgICBpZiAodGhpcy5ib3R0b20gPD0gMCkgICAgICAgICAgIHt0aGlzLl92ZWxvY2l0eS55ID0gMDsgdGhpcy5fcG9zaXRpb24ueSA9IC10aGlzLnNpemUueS8yICsgMX0gLy8gVG9wXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRvcCA+PSBjYW52YXMuaGVpZ2h0KSAge3RoaXMuX3ZlbG9jaXR5LnkgPSAwOyB0aGlzLl9wb3NpdGlvbi55ID0gY2FudmFzLmhlaWdodCArIHRoaXMuc2l6ZS55LzIgLSAxfSAvLyBCb3R0b21cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXcoY3R4OkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6dm9pZCB7XHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gXCJibGFja1wiO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAvLyBjdHgucm91bmRSZWN0KFxyXG4gICAgICAgIC8vICAgICB0aGlzLmxlZnQsXHJcbiAgICAgICAgLy8gICAgIHRoaXMudG9wLFxyXG4gICAgICAgIC8vICAgICB0aGlzLl9zaXplLngsXHJcbiAgICAgICAgLy8gICAgIHRoaXMuX3NpemUueSxcclxuICAgICAgICAvLyAgICAgdGhpcy5taW5TaXplIC8gNVxyXG4gICAgICAgIC8vICk7XHJcbiAgICAgICAgY3R4LmVsbGlwc2UoXHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uLngsXHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uLnksXHJcbiAgICAgICAgICAgIHRoaXMuX3NpemUueC8yLFxyXG4gICAgICAgICAgICB0aGlzLl9zaXplLnkvMixcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgMCwgMipNYXRoLlBJXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGN0eC5maWxsKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgU3ByaW5nIHtcclxuICAgIHByb3RlY3RlZCBsZW5ndGg6bnVtYmVyID0gMDtcclxuICAgIHByb3RlY3RlZCByZWxhdGl2ZVBvczpWZWN0b3IyID0gbmV3IFZlY3RvcjIoKTtcclxuICAgIHByb3RlY3RlZCBlbGFzdGljRm9yY2U6VmVjdG9yMiA9IG5ldyBWZWN0b3IyKCk7XHJcbiAgICBwcm90ZWN0ZWQgZGFtcGluZ0ZvcmNlOlZlY3RvcjIgPSBuZXcgVmVjdG9yMigpO1xyXG4gICAgcHJvdGVjdGVkIGZvcmNlOlZlY3RvcjIgPSBuZXcgVmVjdG9yMigpO1xyXG5cclxuICAgIHByb3RlY3RlZCBkZWZhdWx0V2lkdGggPSAxMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbWFzczE6TWFzcywgcHVibGljIG1hc3MyOk1hc3MsIHByb3RlY3RlZCBuYXR1cmFsTGVuZ3RoID0gMjAwLCBwcm90ZWN0ZWQgc3RpZmZuZXNzOm51bWJlciA9IDFlLTQsIHByb3RlY3RlZCBkYW1waW5nOm51bWJlciA9IDFlLTMpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGb3JjZShkYXR1bU1hc3M6TWFzcyk6VmVjdG9yMiB7XHJcbiAgICAgICAgaWYgKGRhdHVtTWFzcyA9PT0gdGhpcy5tYXNzMikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JjZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JjZS50aW1lcygtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoKTp2b2lkIHtcclxuICAgICAgICB0aGlzLnJlbGF0aXZlUG9zID0gdGhpcy5tYXNzMS5wb3NpdGlvbi5taW51cyh0aGlzLm1hc3MyLnBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMucmVsYXRpdmVQb3MubGVuZ3RoKCk7XHJcbiAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHRoaXMucmVsYXRpdmVQb3Mubm9ybWFsaXplZCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEVsYXN0aWNzXHJcbiAgICAgICAgdGhpcy5lbGFzdGljRm9yY2UgPSBkaXJlY3Rpb24udGltZXMoKHRoaXMubGVuZ3RoIC0gdGhpcy5uYXR1cmFsTGVuZ3RoKSAqIHRoaXMuc3RpZmZuZXNzKVxyXG5cclxuICAgICAgICAvLyBEYW1waW5nXHJcbiAgICAgICAgbGV0IHJlbGF0aXZlU3BlZWQ6bnVtYmVyID0gdGhpcy5tYXNzMS52ZWxvY2l0eS5taW51cyh0aGlzLm1hc3MyLnZlbG9jaXR5KS5kb3QoZGlyZWN0aW9uKTtcclxuICAgICAgICB0aGlzLmRhbXBpbmdGb3JjZSA9IGRpcmVjdGlvbi50aW1lcyhyZWxhdGl2ZVNwZWVkICogdGhpcy5kYW1waW5nKVxyXG5cclxuICAgICAgICAvLyBUb3RhbCBmb3JjZVxyXG4gICAgICAgIHRoaXMuZm9yY2UgPSB0aGlzLmVsYXN0aWNGb3JjZS5wbHVzKHRoaXMuZGFtcGluZ0ZvcmNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTp2b2lkIHtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcblxyXG4gICAgICAgIGN0eC5tb3ZlVG8odGhpcy5tYXNzMS5wb3NpdGlvbi54LCB0aGlzLm1hc3MxLnBvc2l0aW9uLnkpO1xyXG4gICAgICAgIGN0eC5saW5lVG8odGhpcy5tYXNzMi5wb3NpdGlvbi54LCB0aGlzLm1hc3MyLnBvc2l0aW9uLnkpO1xyXG5cclxuICAgICAgICBjdHgubGluZVdpZHRoID0gTWF0aC5taW4odGhpcy5kZWZhdWx0V2lkdGggKiB0aGlzLm5hdHVyYWxMZW5ndGggLyB0aGlzLmxlbmd0aCwgdGhpcy5tYXNzMS5taW5TaXplLCB0aGlzLm1hc3MyLm1pblNpemUpO1xyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdncmF5JztcclxuXHJcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29udGFjdFNwcmluZyBleHRlbmRzIFNwcmluZyB7XHJcbiAgICBwcml2YXRlIGhlcnR6RXhwb25lbnQ6bnVtYmVyID0gMjtcclxuICAgIHByaXZhdGUgcGVuYWx0eUV4cG9uZW50Om51bWJlciA9IC41O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBtYXNzMTpNYXNzLCBwdWJsaWMgbWFzczI6TWFzcywgcHJvdGVjdGVkIG5hdHVyYWxMZW5ndGg6bnVtYmVyLCBwcm90ZWN0ZWQgc3RpZmZuZXNzOm51bWJlciA9IDFlLTUsIHByb3RlY3RlZCBkYW1waW5nOm51bWJlciA9IDFlLTIpIHtcclxuICAgICAgICBzdXBlcihtYXNzMiwgbWFzczEsIG5hdHVyYWxMZW5ndGgsIHN0aWZmbmVzcywgZGFtcGluZyk7XHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6dm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZWxhdGl2ZVBvcyA9IHRoaXMubWFzczEucG9zaXRpb24ubWludXModGhpcy5tYXNzMi5wb3NpdGlvbik7XHJcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLnJlbGF0aXZlUG9zLmxlbmd0aCgpO1xyXG4gICAgICAgIGxldCBkaXJlY3Rpb24gPSB0aGlzLnJlbGF0aXZlUG9zLm5vcm1hbGl6ZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoIDwgdGhpcy5uYXR1cmFsTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIEVsYXN0aWNzXHJcbiAgICAgICAgICAgIGNvbnN0IGhvb2tlID0gTWF0aC5wb3codGhpcy5uYXR1cmFsTGVuZ3RoIC0gdGhpcy5sZW5ndGgsIHRoaXMuaGVydHpFeHBvbmVudCkgKiB0aGlzLnN0aWZmbmVzcztcclxuICAgICAgICAgICAgY29uc3QgcGVuYWx0eSA9IDEgKyAxIC8gTWF0aC5wb3codGhpcy5sZW5ndGgsIHRoaXMucGVuYWx0eUV4cG9uZW50KTtcclxuICAgICAgICAgICAgdGhpcy5lbGFzdGljRm9yY2UgPSBkaXJlY3Rpb24udGltZXMoaG9va2UgKiBwZW5hbHR5KS50aW1lcygtMSk7XHJcblxyXG4gICAgICAgICAgICAvLyBEYW1waW5nXHJcbiAgICAgICAgICAgIGxldCByZWxhdGl2ZVNwZWVkOm51bWJlciA9IHRoaXMubWFzczEudmVsb2NpdHkubWludXModGhpcy5tYXNzMi52ZWxvY2l0eSkuZG90KGRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMuZGFtcGluZ0ZvcmNlID0gZGlyZWN0aW9uLnRpbWVzKHJlbGF0aXZlU3BlZWQgKiB0aGlzLmRhbXBpbmcpXHJcblxyXG4gICAgICAgICAgICAvLyBUb3RhbCBmb3JjZVxyXG4gICAgICAgICAgICB0aGlzLmZvcmNlID0gdGhpcy5lbGFzdGljRm9yY2UucGx1cyh0aGlzLmRhbXBpbmdGb3JjZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JjZSA9IG5ldyBWZWN0b3IyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgRGVtb1R5cGUsIFZlY3RvcjIgfSBmcm9tIFwiLi91dGlsaXRpZXNcIjtcclxuaW1wb3J0IHsgTWFzcywgU3ByaW5nLCBDb250YWN0U3ByaW5nIH0gZnJvbSBcIi4vZW50aXRpZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lIHtcclxuICAgIHByaXZhdGUgY3R4OkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHByaXZhdGUgbW91c2VQb3NpdGlvbiA9IG5ldyBWZWN0b3IyKCk7XHJcblxyXG4gICAgcHJpdmF0ZSBsYXN0VGltZTpudW1iZXI7IC8vIG1pbGxpc2Vjb25kc1xyXG4gICAgcHJpdmF0ZSBkZWx0YVRpbWU6bnVtYmVyOyAvLyBtaWxsaXNlY29uZHNcclxuICAgIHByaXZhdGUgbWF4RGVsdGFUaW1lOm51bWJlciA9IDUwOyAvL21pbGxpc2Vjb25kc1xyXG4gICAgcHJpdmF0ZSBtYXNzZXM6TWFzc1tdO1xyXG4gICAgcHJpdmF0ZSBzcHJpbmdzOlNwcmluZ1tdO1xyXG4gICAgcHJpdmF0ZSBlbnRpdHlTcHJpbmdzOlNwcmluZ1tdO1xyXG5cclxuICAgIHByaXZhdGUgZ3Jhdml0eTpudW1iZXIgPSA1ZS00OyAvLyBwaXhlbHMvbXNlYy9tc2VjXHJcbiAgICBwcml2YXRlIG1heEZvcmNlOm51bWJlciA9IDFlLTE7XHJcbiAgICBwcml2YXRlIG1heFNwZWVkOm51bWJlciA9IDFlNDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNhbnZhczpIVE1MQ2FudmFzRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gICAgICAgIHRoaXMubGFzdFRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuZGVsdGFUaW1lID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5tYXNzZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnNwcmluZ3MgPSBbXTtcclxuICAgICAgICB0aGlzLmVudGl0eVNwcmluZ3MgPSBbXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGFkZE1hc3MobWFzczpNYXNzKTp2b2lkIHtcclxuICAgICAgICB0aGlzLm1hc3Nlcy5mb3JFYWNoKGV4aXN0aW5nTWFzcyA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZXdTcHJpbmcgPSBuZXcgQ29udGFjdFNwcmluZyhleGlzdGluZ01hc3MsIG1hc3MsIGV4aXN0aW5nTWFzcy5tYXhTaXplLzIgKyBtYXNzLm1heFNpemUvMik7XHJcbiAgICAgICAgICAgIHRoaXMuZW50aXR5U3ByaW5ncy5wdXNoKG5ld1NwcmluZyk7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nTWFzcy5hZGRFbnRpdHlTcHJpbmcobmV3U3ByaW5nKTtcclxuICAgICAgICAgICAgbWFzcy5hZGRFbnRpdHlTcHJpbmcobmV3U3ByaW5nKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWFzc2VzLnB1c2gobWFzcyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkU3ByaW5nKHNwcmluZzpTcHJpbmcpOnZvaWQge1xyXG4gICAgICAgIHRoaXMuc3ByaW5ncy5wdXNoKHNwcmluZyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc3ByaW5nLm1hc3MxLmFkZFNwcmluZyhzcHJpbmcpO1xyXG4gICAgICAgIHNwcmluZy5tYXNzMi5hZGRTcHJpbmcoc3ByaW5nKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIG1vdXNlRG93bihldnQ6TW91c2VFdmVudCk6dm9pZCB7XHJcbiAgICAgICAgdGhpcy5tb3VzZVBvc2l0aW9uLnggPSBldnQueDtcclxuICAgICAgICB0aGlzLm1vdXNlUG9zaXRpb24ueSA9IGV2dC55O1xyXG5cclxuICAgICAgICAvLyBXb3JrIG91dCB3aGV0aGVyIHRoZSBtb3VzZSBjbGljayB3YXMgd2l0aGluIGFueSBvZiB0aGUgbWFzc2VzXHJcbiAgICAgICAgdGhpcy5tYXNzZXMuZm9yRWFjaChtYXNzID0+IHtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgbWFzcy5wb3NpdGlvbi54IC0gbWFzcy5zaXplLnggPD0gZXZ0LnggJiZcclxuICAgICAgICAgICAgICAgIG1hc3MucG9zaXRpb24ueCArIG1hc3Muc2l6ZS54ID49IGV2dC54ICYmXHJcbiAgICAgICAgICAgICAgICBtYXNzLnBvc2l0aW9uLnkgLSBtYXNzLnNpemUueSA8PSBldnQueSAmJlxyXG4gICAgICAgICAgICAgICAgbWFzcy5wb3NpdGlvbi55ICsgbWFzcy5zaXplLnkgPj0gZXZ0LnkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFzcy5pc0JlaW5nRHJhZ2dlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFzcy5yZWxhdGl2ZU1vdXNlUG9zaXRpb24gPSB0aGlzLm1vdXNlUG9zaXRpb24ubWludXMobWFzcy5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHB1YmxpYyBtb3VzZU1vdmUoZXZ0Ok1vdXNlRXZlbnQpOnZvaWQge1xyXG4gICAgICAgIHRoaXMubW91c2VQb3NpdGlvbi54ID0gZXZ0Lng7XHJcbiAgICAgICAgdGhpcy5tb3VzZVBvc2l0aW9uLnkgPSBldnQueTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBtb3VzZVVwKGV2dDpNb3VzZUV2ZW50KTp2b2lkIHtcclxuICAgICAgICB0aGlzLm1hc3Nlcy5mb3JFYWNoKG1hc3MgPT4gbWFzcy5pc0JlaW5nRHJhZ2dlZCA9IGZhbHNlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGNyZWF0ZURlbW8odHlwZTpEZW1vVHlwZSk6dm9pZCB7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09IERlbW9UeXBlLlRyaWFuZ2xlKSB7XHJcbiAgICAgICAgICAgIGxldCBtYXNzMSA9IG5ldyBNYXNzKG5ldyBWZWN0b3IyKDE1LCAzMCkpO1xyXG4gICAgICAgICAgICBsZXQgbWFzczIgPSBuZXcgTWFzcyhuZXcgVmVjdG9yMigzMCwgMzAwKSk7XHJcbiAgICAgICAgICAgIGxldCBtYXNzMyA9IG5ldyBNYXNzKG5ldyBWZWN0b3IyKDMwMCwgMzApKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRNYXNzKG1hc3MxKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRNYXNzKG1hc3MyKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRNYXNzKG1hc3MzKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzcHJpbmcxID0gbmV3IFNwcmluZyhtYXNzMSwgbWFzczIpO1xyXG4gICAgICAgICAgICBsZXQgc3ByaW5nMiA9IG5ldyBTcHJpbmcobWFzczIsIG1hc3MzKTtcclxuICAgICAgICAgICAgbGV0IHNwcmluZzMgPSBuZXcgU3ByaW5nKG1hc3MxLCBtYXNzMyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkU3ByaW5nKHNwcmluZzEpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNwcmluZyhzcHJpbmcyKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRTcHJpbmcoc3ByaW5nMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZSA9PT0gRGVtb1R5cGUuUGFyYWxsZWxvZ3JhbSkge1xyXG4gICAgICAgICAgICBsZXQgbWFzczEgPSBuZXcgTWFzcyhuZXcgVmVjdG9yMigzMCwgMzApKTtcclxuICAgICAgICAgICAgbGV0IG1hc3MyID0gbmV3IE1hc3MobmV3IFZlY3RvcjIoMzAsIDMwMCkpO1xyXG4gICAgICAgICAgICBsZXQgbWFzczMgPSBuZXcgTWFzcyhuZXcgVmVjdG9yMigzMDAsIDMwKSk7XHJcbiAgICAgICAgICAgIGxldCBtYXNzNCA9IG5ldyBNYXNzKG5ldyBWZWN0b3IyKDMwMCwgMzAwKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWFzcyhtYXNzMSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWFzcyhtYXNzMik7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWFzcyhtYXNzMyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWFzcyhtYXNzNCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgc3ByaW5nMSA9IG5ldyBTcHJpbmcobWFzczEsIG1hc3MyKTtcclxuICAgICAgICAgICAgbGV0IHNwcmluZzIgPSBuZXcgU3ByaW5nKG1hc3MyLCBtYXNzMyk7XHJcbiAgICAgICAgICAgIGxldCBzcHJpbmczID0gbmV3IFNwcmluZyhtYXNzMSwgbWFzczMpO1xyXG4gICAgICAgICAgICBsZXQgc3ByaW5nNCA9IG5ldyBTcHJpbmcobWFzczMsIG1hc3M0KTtcclxuICAgICAgICAgICAgbGV0IHNwcmluZzUgPSBuZXcgU3ByaW5nKG1hc3MyLCBtYXNzNCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkU3ByaW5nKHNwcmluZzEpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNwcmluZyhzcHJpbmcyKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRTcHJpbmcoc3ByaW5nMyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkU3ByaW5nKHNwcmluZzQpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNwcmluZyhzcHJpbmc1KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09PSBEZW1vVHlwZS5TcXVhcmUpIHtcclxuICAgICAgICAgICAgbGV0IG1hc3MxID0gbmV3IE1hc3MobmV3IFZlY3RvcjIoMzAsIDMwKSk7XHJcbiAgICAgICAgICAgIGxldCBtYXNzMiA9IG5ldyBNYXNzKG5ldyBWZWN0b3IyKDMwLCAzMDApKTtcclxuICAgICAgICAgICAgbGV0IG1hc3MzID0gbmV3IE1hc3MobmV3IFZlY3RvcjIoMzAwLCAzMCkpO1xyXG4gICAgICAgICAgICBsZXQgbWFzczQgPSBuZXcgTWFzcyhuZXcgVmVjdG9yMigzMDAsIDMwMCkpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZE1hc3MobWFzczEpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZE1hc3MobWFzczIpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZE1hc3MobWFzczMpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZE1hc3MobWFzczQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHNwcmluZzEgPSBuZXcgU3ByaW5nKG1hc3MxLCBtYXNzMik7XHJcbiAgICAgICAgICAgIGxldCBzcHJpbmcyID0gbmV3IFNwcmluZyhtYXNzMSwgbWFzczQsIDIwMCpNYXRoLnNxcnQoMikpO1xyXG4gICAgICAgICAgICBsZXQgc3ByaW5nMyA9IG5ldyBTcHJpbmcobWFzczIsIG1hc3M0KTtcclxuICAgICAgICAgICAgbGV0IHNwcmluZzQgPSBuZXcgU3ByaW5nKG1hc3MzLCBtYXNzNCk7XHJcbiAgICAgICAgICAgIGxldCBzcHJpbmc1ID0gbmV3IFNwcmluZyhtYXNzMSwgbWFzczMpO1xyXG4gICAgICAgICAgICBsZXQgc3ByaW5nNiA9IG5ldyBTcHJpbmcobWFzczIsIG1hc3MzLCAyMDAqTWF0aC5zcXJ0KDIpKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRTcHJpbmcoc3ByaW5nMSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkU3ByaW5nKHNwcmluZzIpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNwcmluZyhzcHJpbmczKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRTcHJpbmcoc3ByaW5nNCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkU3ByaW5nKHNwcmluZzUpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNwcmluZyhzcHJpbmc2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09PSBEZW1vVHlwZS5DZW50ZXJlZFNxdWFyZSkge1xyXG4gICAgICAgICAgICBsZXQgbWFzczEgPSBuZXcgTWFzcyhuZXcgVmVjdG9yMigzMCwgMzApKTtcclxuICAgICAgICAgICAgbGV0IG1hc3MyID0gbmV3IE1hc3MobmV3IFZlY3RvcjIoMzAsIDMwMCkpO1xyXG4gICAgICAgICAgICBsZXQgbWFzczMgPSBuZXcgTWFzcyhuZXcgVmVjdG9yMigzMDAsIDMwKSk7XHJcbiAgICAgICAgICAgIGxldCBtYXNzNCA9IG5ldyBNYXNzKG5ldyBWZWN0b3IyKDMwMCwgMzAwKSk7XHJcbiAgICAgICAgICAgIGxldCBtYXNzNSA9IG5ldyBNYXNzKG5ldyBWZWN0b3IyKDE1MCwgMTUwKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWFzcyhtYXNzMSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWFzcyhtYXNzMik7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWFzcyhtYXNzMyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWFzcyhtYXNzNCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWFzcyhtYXNzNSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgc3ByaW5nMSA9IG5ldyBTcHJpbmcobWFzczEsIG1hc3MyKTtcclxuICAgICAgICAgICAgbGV0IHNwcmluZzIgPSBuZXcgU3ByaW5nKG1hc3MxLCBtYXNzMyk7XHJcbiAgICAgICAgICAgIGxldCBzcHJpbmczID0gbmV3IFNwcmluZyhtYXNzMiwgbWFzczQpO1xyXG4gICAgICAgICAgICBsZXQgc3ByaW5nNCA9IG5ldyBTcHJpbmcobWFzczMsIG1hc3M0KTtcclxuICAgICAgICAgICAgbGV0IHNwcmluZzUgPSBuZXcgU3ByaW5nKG1hc3MxLCBtYXNzNSwgMTAwKk1hdGguc3FydCgyKSk7XHJcbiAgICAgICAgICAgIGxldCBzcHJpbmc2ID0gbmV3IFNwcmluZyhtYXNzMiwgbWFzczUsIDEwMCpNYXRoLnNxcnQoMikpO1xyXG4gICAgICAgICAgICBsZXQgc3ByaW5nNyA9IG5ldyBTcHJpbmcobWFzczMsIG1hc3M1LCAxMDAqTWF0aC5zcXJ0KDIpKTtcclxuICAgICAgICAgICAgbGV0IHNwcmluZzggPSBuZXcgU3ByaW5nKG1hc3M0LCBtYXNzNSwgMTAwKk1hdGguc3FydCgyKSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkU3ByaW5nKHNwcmluZzEpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNwcmluZyhzcHJpbmcyKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRTcHJpbmcoc3ByaW5nMyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkU3ByaW5nKHNwcmluZzQpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNwcmluZyhzcHJpbmc1KTtcclxuICAgICAgICAgICAgdGhpcy5hZGRTcHJpbmcoc3ByaW5nNik7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkU3ByaW5nKHNwcmluZzcpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNwcmluZyhzcHJpbmc4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0KCk6dm9pZCB7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMubWFpbkxvb3AuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG1haW5Mb29wKGN1cnJlbnRUaW1lOm51bWJlcik6dm9pZCB7XHJcbiAgICAgICAgdGhpcy5kZWx0YVRpbWUgPSBNYXRoLm1pbihjdXJyZW50VGltZSAtIHRoaXMubGFzdFRpbWUsIHRoaXMubWF4RGVsdGFUaW1lKTtcclxuICAgICAgICB0aGlzLmxhc3RUaW1lID0gY3VycmVudFRpbWU7XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlKHRoaXMuZGVsdGFUaW1lKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmRyYXcoKTtcclxuXHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMubWFpbkxvb3AuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHVwZGF0ZShkZWx0YVRpbWU6bnVtYmVyKTp2b2lkIHtcclxuICAgICAgICB0aGlzLm1hc3Nlcy5mb3JFYWNoKChtYXNzKSA9PiBtYXNzLnVwZGF0ZSh0aGlzLmNhbnZhcywgZGVsdGFUaW1lLCB0aGlzLm1vdXNlUG9zaXRpb24sIHRoaXMubWFzc2VzLCB0aGlzLmdyYXZpdHksIHRoaXMubWF4Rm9yY2UsIHRoaXMubWF4U3BlZWQpKTtcclxuICAgICAgICB0aGlzLnNwcmluZ3MuZm9yRWFjaCgoc3ByaW5nKSA9PiBzcHJpbmcudXBkYXRlKCkpO1xyXG4gICAgICAgIHRoaXMuZW50aXR5U3ByaW5ncy5mb3JFYWNoKChzcHJpbmcpID0+IHNwcmluZy51cGRhdGUoKSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGRyYXcoKTp2b2lkIHtcclxuICAgICAgICAvLyBDbGVhciBzY3JlZW5cclxuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3ByaW5ncy5mb3JFYWNoKChzdHJpbmcpID0+IHN0cmluZy5kcmF3KHRoaXMuY3R4KSk7XHJcbiAgICAgICAgdGhpcy5tYXNzZXMuZm9yRWFjaCgobWFzcykgPT4gbWFzcy5kcmF3KHRoaXMuY3R4KSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRGVtb1R5cGUgfSBmcm9tIFwiLi91dGlsaXRpZXNcIjtcclxuaW1wb3J0IHsgR2FtZSB9IGZyb20gXCIuL2dhbWVcIjtcclxuXHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5cclxuZnVuY3Rpb24gcmVzaXplQ2FudmFzKCk6IHZvaWQge1xyXG4gICAgY2FudmFzLndpZHRoICA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUNhbnZhcylcclxucmVzaXplQ2FudmFzKClcclxuXHJcblxyXG5jb25zdCBnYW1lID0gbmV3IEdhbWUoY2FudmFzKTtcclxuXHJcbmNhbnZhcy5vbm1vdXNlZG93biA9IGdhbWUubW91c2VEb3duLmJpbmQoZ2FtZSk7XHJcbmNhbnZhcy5vbm1vdXNlbW92ZSA9IGdhbWUubW91c2VNb3ZlLmJpbmQoZ2FtZSk7XHJcbmNhbnZhcy5vbm1vdXNldXAgPSBnYW1lLm1vdXNlVXAuYmluZChnYW1lKTtcclxuXHJcbmNvbnN0IHJhbmRFbnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogT2JqZWN0LmtleXMoRGVtb1R5cGUpLmxlbmd0aCAvIDIpXHJcbmdhbWUuY3JlYXRlRGVtbyhyYW5kRW51bSk7XHJcblxyXG5nYW1lLnN0YXJ0KCk7XHJcbiJdLCJuYW1lcyI6WyJEZW1vVHlwZSIsIngiLCJ5IiwiYWRkIiwidmVjdG9yIiwidGhpcyIsInN1YnRyYWN0IiwibXVsdGlwbHlCeSIsInNjYWxhciIsIm5vcm1hbGl6ZSIsImxlbmd0aCIsInBsdXMiLCJWZWN0b3IyIiwibWludXMiLCJ0aW1lcyIsIk1hdGgiLCJzcXJ0IiwicG93Iiwibm9ybWFsaXplZCIsImRvdCIsImNsYW1wIiwibWFnbml0dWRlIiwiY29weSIsIl9wb3NpdGlvbiIsIm1hc3MiLCJzdGlmZm5lc3MiLCJkYW1waW5nIiwiX3NpemUiLCJkcmFnQ29lZmZpY2llbnQiLCJpc0JlaW5nRHJhZ2dlZCIsInJlbGF0aXZlTW91c2VQb3NpdGlvbiIsInNwcmluZ3MiLCJlbnRpdHlTcHJpbmdzIiwiX3ZlbG9jaXR5IiwibWluIiwibWF4IiwiYWRkU3ByaW5nIiwic3ByaW5nIiwicHVzaCIsImFkZEVudGl0eVNwcmluZyIsInVwZGF0ZSIsImNhbnZhcyIsImRlbHRhVGltZSIsIm1vdXNlUG9zaXRpb24iLCJtYXNzZXMiLCJncmF2aXR5IiwibWF4Rm9yY2UiLCJtYXhTcGVlZCIsIm9sZFBvc2l0aW9uIiwiZm9yRWFjaCIsImdldEZvcmNlIiwid2FsbFNwcmluZ3MiLCJsZWZ0IiwiQ29udGFjdFNwcmluZyIsIk1hc3MiLCJyaWdodCIsIndpZHRoIiwidG9wIiwiYm90dG9tIiwiaGVpZ2h0IiwiYWNjZWxlcmF0aW9uIiwic2l6ZSIsImRyYXciLCJjdHgiLCJzdHJva2VTdHlsZSIsImJlZ2luUGF0aCIsImVsbGlwc2UiLCJQSSIsImZpbGwiLCJtYXNzMSIsIm1hc3MyIiwibmF0dXJhbExlbmd0aCIsInJlbGF0aXZlUG9zIiwiZWxhc3RpY0ZvcmNlIiwiZGFtcGluZ0ZvcmNlIiwiZm9yY2UiLCJkZWZhdWx0V2lkdGgiLCJkYXR1bU1hc3MiLCJwb3NpdGlvbiIsImRpcmVjdGlvbiIsInJlbGF0aXZlU3BlZWQiLCJ2ZWxvY2l0eSIsIm1vdmVUbyIsImxpbmVUbyIsImxpbmVXaWR0aCIsIm1pblNpemUiLCJzdHJva2UiLCJoZXJ0ekV4cG9uZW50IiwicGVuYWx0eUV4cG9uZW50IiwiaG9va2UiLCJwZW5hbHR5IiwiU3ByaW5nIiwibWF4RGVsdGFUaW1lIiwiZ2V0Q29udGV4dCIsImxhc3RUaW1lIiwiYWRkTWFzcyIsImV4aXN0aW5nTWFzcyIsIm5ld1NwcmluZyIsIm1heFNpemUiLCJtb3VzZURvd24iLCJldnQiLCJtb3VzZU1vdmUiLCJtb3VzZVVwIiwiY3JlYXRlRGVtbyIsInR5cGUiLCJUcmlhbmdsZSIsIm1hc3MzIiwic3ByaW5nMSIsInNwcmluZzIiLCJzcHJpbmczIiwiUGFyYWxsZWxvZ3JhbSIsIm1hc3M0Iiwic3ByaW5nNCIsInNwcmluZzUiLCJTcXVhcmUiLCJzcHJpbmc2IiwiQ2VudGVyZWRTcXVhcmUiLCJtYXNzNSIsInNwcmluZzciLCJzcHJpbmc4Iiwic3RhcnQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtYWluTG9vcCIsImJpbmQiLCJjdXJyZW50VGltZSIsImNsZWFyUmVjdCIsInN0cmluZyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZXNpemVDYW52YXMiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2FtZSIsIkdhbWUiLCJvbm1vdXNlZG93biIsIm9ubW91c2Vtb3ZlIiwib25tb3VzZXVwIiwicmFuZEVudW0iLCJmbG9vciIsInJhbmRvbSIsIk9iamVjdCIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9